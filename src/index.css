@tailwind base;
@tailwind components;
@tailwind utilities;

html,
body {
  margin: 0;
  padding: 0;
  overflow: hidden; /* HILANGKAN SCROLL */
  height: 100%;
  width: 100%;
  touch-action: none; /* Mencegah scroll accidental */
}

/* FIX FULLSCREEN iPhone */
:root {
  --vh: 1vh;
}

/* VIEWPORT FIX untuk iOS Safari & Chrome */
@supports (height: 100svh) {
  body {
    height: 100svh; /* Small viewport height - tidak termasuk address bar */
  }
}

@supports (height: 100dvh) {
  body {
    height: 100dvh; /* Dynamic viewport height - menyesuaikan dengan address bar */
  }
}

@supports (-webkit-touch-callout: none) {
  .font-anatomical {
    padding: 0 11px;
    overflow: visible;
  }
}

@import url("https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&display=swap");

@font-face {
  font-family: "Anatomical";
  src: url("/fonts/Anatomical.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Vremya";
  src: url("/fonts/Vremya.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@layer base {
  :root {
    /* background variables: save old values as --*-old then set to white */
    --background-old: 30 50% 98%;
    --background: 0 0% 100%;
    --foreground: 350 30% 25%;

    --card-old: 30 40% 96%;
    --card: 0 0% 100%;
    --card-foreground: 350 30% 25%;

    --popover-old: 30 40% 96%;
    --popover: 0 0% 100%;
    --popover-foreground: 350 30% 25%;

    --primary: 350 45% 40%;
    --primary-foreground: 30 50% 98%;

    --secondary-old: 35 60% 90%;
    --secondary: 0 0% 100%;
    --secondary-foreground: 350 30% 25%;

    --muted-old: 30 30% 92%;
    --muted: 0 0% 100%;
    --muted-foreground: 350 20% 45%;

    --accent: 38 70% 60%;
    --accent-foreground: 350 30% 20%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 350 20% 85%;
    --input: 350 20% 85%;
    --ring: 350 45% 40%;

    --radius: 0.5rem;

    /* Wedding theme colors (make cream/blush white for full-white background) */
    --wedding-pink: 350 60% 65%;
    --wedding-pink-dark: 350 45% 40%;
    --wedding-coral: 15 70% 65%;
    --wedding-gold: 38 70% 55%;
    --wedding-cream-old: 40 50% 96%;
    --wedding-cream: 0 0% 100%;
    --wedding-blush-old: 350 40% 92%;
    --wedding-blush: 0 0% 100%;

    /* Fonts */
    --font-anatomical: "Anatomical", serif;
    --font-vremya: "Vremya", sans-serif;
    --font-arabic: "Amiri", serif;
  }

  .dark {
    --background: 350 30% 8%;
    --foreground: 30 50% 95%;

    --card: 350 30% 12%;
    --card-foreground: 30 50% 95%;

    --popover: 350 30% 12%;
    --popover-foreground: 30 50% 95%;

    --primary: 350 50% 70%;
    --primary-foreground: 350 30% 10%;

    --secondary: 350 25% 20%;
    --secondary-foreground: 30 50% 95%;

    --muted: 350 25% 18%;
    --muted-foreground: 30 30% 65%;

    --accent: 38 60% 50%;
    --accent-foreground: 30 50% 95%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 350 25% 20%;
    --input: 350 25% 20%;
    --ring: 350 50% 70%;

    --wedding-pink: 350 50% 70%;
    --wedding-pink-dark: 350 45% 55%;
    --wedding-coral: 15 60% 60%;
    --wedding-gold: 38 60% 50%;
    --wedding-cream: 350 20% 15%;
    --wedding-blush: 350 30% 18%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-serif);
  }
}

@layer components {
  /* WRAPPER UTAMA (khusus DESKTOP) */
  .phone-wrapper {
    @apply flex items-center justify-center bg-black;
    width: 100%;
    height: 100vh;
    height: 100dvh;
    height: 100svh;
  }

  /* LAYAR HP */
  .phone-container {
    width: 100%;
    height: 100%;
    min-height: 100dvh;
    min-height: 100svh;
    @apply bg-gradient-to-br from-wedding-cream via-wedding-blush to-secondary overflow-hidden relative;
  }

  /* Preview mode pada laptop */
  @media (min-width: 640px) {
    .phone-container {
      /* Preserve exact device size when viewport is tall enough, otherwise scale down to fit vertically */
      width: min(430px, calc((100vh - 48px) * 430 / 932));
      height: auto;
      aspect-ratio: 430 / 932;
      border-radius: 20px;
      transform-origin: top center;
    }
  }

  .wedding-gradient {
    @apply bg-gradient-to-br from-wedding-cream via-wedding-blush to-secondary;
  }

  .font-script {
    font-family: var(--font-script);
  }

  .font-serif-wedding {
    font-family: var(--font-serif);
  }

  .font-arabic {
    font-family: var(--font-arabic);
  }
}

@layer utilities {
  /* Fade animations */
  @keyframes fade-in-up {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  @keyframes fade-in-scale {
    0% {
      opacity: 0;
      transform: scale(0.9);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up 1s ease-out forwards;
  }

  .animate-fade-in {
    animation: fade-in 1s ease-out forwards;
  }

  .animate-fade-in-scale {
    animation: fade-in-scale 1s ease-out forwards;
  }

  /* Hints to promote the frame images to their own layer and reduce jank */
  .frame-img {
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    will-change: transform, opacity;
    -webkit-font-smoothing: antialiased;
  }

  /* allow tailoring transform-origin for top vs bottom frames */
  .flower-top .frame-img {
    transform-origin: center top;
  }

  .flower-bottom .frame-img {
    transform-origin: center bottom;
  }

  /* frame entrance: subtle scale-in (no sudden jump) */
  @keyframes frame-enter {
    0% {
      opacity: 0;
      transform: scale(1.08) translateY(-6px) translateZ(0);
    }
    70% {
      opacity: 1;
      transform: scale(1.015) translateY(-2px) translateZ(0);
    }
    100% {
      opacity: 1;
      transform: scale(1) translateY(0) translateZ(0);
    }
  }

  .animate-frame-enter {
    animation: frame-enter 1.1s cubic-bezier(0.2, 0.9, 0.3, 1) both;
    will-change: transform, opacity;
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  /* flowers pulse towards center and back */
  @keyframes flower-pulse {
    0% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-20px);
    }
    100% {
      transform: translateY(0);
    }
  }

  .animate-flower-pulse {
    animation: flower-pulse 2.5s ease-in-out infinite;
  }

  /* reverse pulse for bottom flowers (moves down to center then back) */
  @keyframes flower-pulse-reverse {
    0% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(20px);
    }
    100% {
      transform: translateY(0);
    }
  }

  .animate-flower-pulse-reverse {
    animation: flower-pulse-reverse 2.5s ease-in-out infinite;
  }

  /* Flower curtain close: top flower moves down to cover, bottom moves up to cover */
  @keyframes flower-curtain-close {
    0% {
      clip-path: polygon(0 0, 100% 0, 100% 0, 0 0);
    }
    100% {
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    }
  }

  /* Flower curtain open: flowers move back to reveal content */
  @keyframes flower-curtain-open {
    0% {
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    }
    100% {
      clip-path: polygon(0 0, 100% 0, 100% 0, 0 0);
    }
  }

  .animate-flower-curtain-close {
    animation: flower-curtain-close 0.8s ease-in-out forwards;
  }

  .animate-flower-curtain-open {
    animation: flower-curtain-open 0.8s ease-in-out forwards;
  }

  /* gentle ease-in used by frame SVGs */
  @keyframes fade-in-ease {
    0% {
      opacity: 0;
      transform: translateY(8px) scale(0.995);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .animate-fade-in-ease {
    animation: fade-in-ease 1s cubic-bezier(0.22, 0.9, 0.33, 1) forwards;
  }

  .animation-delay-100 {
    animation-delay: 100ms;
  }

  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-300 {
    animation-delay: 300ms;
  }

  .animation-delay-400 {
    animation-delay: 400ms;
  }

  .animation-delay-500 {
    animation-delay: 500ms;
  }

  .animation-delay-600 {
    animation-delay: 600ms;
  }

  .animation-delay-700 {
    animation-delay: 700ms;
  }

  .animation-delay-800 {
    animation-delay: 800ms;
  }

  .animation-delay-900 {
    animation-delay: 900ms;
  }

  .animation-delay-1200 {
    animation-delay: 1200ms;
  }

  /* utility to use CSS variable for flexible delays */
  .anim-delay {
    animation-delay: var(--anim-delay, 0ms);
  }

  /* Slide transition animations */
  @keyframes slide-fade-in {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-fade-out {
    0% {
      opacity: 1;
      transform: translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateY(-20px);
    }
  }

  /* Frame corner animations for slide 1 */
  @keyframes frame-corner-fade-in {
    0% {
      opacity: 0;
      transform: scale(0.9);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-slide-in {
    animation: slide-fade-in 0.6s ease-out forwards;
  }

  .animate-frame-corner-in {
    animation: frame-corner-fade-in 0.8s ease-out forwards;
    animation-delay: 0.2s;
  }

  /* Corner flower pulse animations */
  @keyframes corner-pulse-top-left {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    50% {
      transform: translate(5px, 5px) scale(1.02);
    }
  }

  @keyframes corner-pulse-bottom-right {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    50% {
      transform: translate(-5px, -5px) scale(1.02);
    }
  }

  @keyframes corner-pulse-top-right {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    50% {
      transform: translate(-5px, 5px) scale(1.02);
    }
  }

  @keyframes corner-pulse-bottom-left {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    50% {
      transform: translate(5px, -5px) scale(1.02);
    }
  }

  .animate-corner-pulse-tl {
    animation: corner-pulse-top-left 2.5s ease-in-out infinite;
  }

  .animate-corner-pulse-br {
    animation: corner-pulse-bottom-right 2.5s ease-in-out infinite;
  }

  .animate-corner-pulse-tr {
    animation: corner-pulse-top-right 2.5s ease-in-out infinite;
  }

  .animate-corner-pulse-bl {
    animation: corner-pulse-bottom-left 2.5s ease-in-out infinite;
  }
}
